<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="~/material-kit-master/assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        Retail SO
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <link rel="canonical" href="https://www.creative-tim.com/product/material-kit">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="../material-kit-master/assets/css/material-kit.min.css" rel="stylesheet" />

    <script src="../material-kit-master/assets/js/material-kit.min.js"></script>
    <script src="../material-kit-master/assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="../material-kit-master/assets/js/core/popper.min.js" type="text/javascript"></script>

    <script src="../material-kit-master/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="../material-kit-master/assets/js/plugins/moment.min.js"></script>
    <script src="../material-kit-master/assets/js/plugins/bootstrap-datetimepicker.js"></script>
    <script src="../material-kit-master/assets/js/plugins/jquery.sharrre.js" type="text/javascript"></script>
    <!-- Control Center for Material Kit: parallax effects, scripts for the example pages etc -->
    <script src="../material-kit-master/assets/js/material-kit.js" type="text/javascript"></script>
    <script src="../material-kit-master/assets/js/material-kit.min.js" type="text/javascript"></script>
    <script src="../material-kit-master/assets/js/progress.js"></script>
    <link href="../material-kit-master/assets/css/progress_style.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <link href="../fullcalendar/core/main.css" rel="stylesheet" />
    <link href="../fullcalendar/daygrid/main.css" rel="stylesheet" />
    <link href="../fullcalendar/timegrid/main.css" rel="stylesheet" />
    <link href="../fullcalendar/list/main.css" rel="stylesheet" />
    <link href="../fullcalendar/fullcalendar.min.css" rel="stylesheet" />
    <link href="../fullcalendar/bootstrap/main.css" rel="stylesheet" />

    <script src="../fullcalendar/core/main.js"></script>
    <script src="../fullcalendar/core/main.min.js"></script>
    <script src="../fullcalendar/interaction/main.js"></script>
    <script src="../fullcalendar/daygrid/main.js"></script>
    <script src="../fullcalendar/timegrid/main.js"></script>
    <script src="../fullcalendar/list/main.js"></script>
    <script src="../fullcalendar/bootstrap/main.js"></script>
    <script src="../fullcalendar/fullcalendar.min.js"></script>
    <script src="../fullcalendar/google-calendar/main.js"></script>
    <script src="../fullcalendar/moment-timezone/main.js"></script>
    <script src="../fullcalendar/moment/main.js"></script>
    <script src="../fullcalendar/rrule/main.js"></script>
    <script src="../fullcalendar/core/locales/th.js"></script>

    <script>
        $(document).ready(function () {
           
            materialKit.initFormExtendedDatetimepickers();

            $('.datepicker').datetimepicker({
                format: 'DD/MM/YYYY',
                icons: {
                    time: "fa fa-clock-o",
                    date: "fa fa-calendar",
                    up: "fa fa-chevron-up",
                    down: "fa fa-chevron-down",
                    previous: 'fa fa-chevron-left',
                    next: 'fa fa-chevron-right',
                    today: 'fa fa-screenshot',
                    clear: 'fa fa-trash',
                    close: 'fa fa-remove'
                }
            });

            var user = GetUrlParm('u');
            var type = GetUrlParm('t');

            if (user == "admindev") {
                $('#tabAdmin').css('display', 'inherit');
            }
            else {
                $('#tabAdmin').css('display', 'None');
            }

            //--------------------------  Table Header  --------------------------------
            var storeHead = '';
            var creatDate = '';
            if (type == "4") {//User type AdminDev
                storeHead = '<th>StoreId</th>';
                creatDate = '<div class="row"><font color="red">วันที่ติดตั้ง</font></div>';
            }
            else if (type != "1") {//User type Area
                storeHead = '<th>StoreId</th>';
            }

            var thead = '<tr style="height:50px;">' +
                            '<th width="10px">#</th>' +
                            '<th align="left" width="100px">' +
                                '<div class="row">วันที่ขาย</div>' +
                                '<div class="row">วันที่ติดตั้ง</div>' +
                                creatDate +
                            '</th>' +
                            storeHead +
                            '<th width="150px">Pool</th>' +
                            '<th width="90px">' +
                            'จำนวน<br />ยอดรวม' +
                            '</th>' +
                            '<th>' + '<div class="row">' +
                                '<div class="col">Sales order</div>' +
                                    '<div class="col">Purchase order</div>' +
                                '</div>' +
                            '</th>' +
                '<th width="10px">รายการ</th>' +
                '<th width="10px">รูป</th>' +
                            '<th width="110px">Action</th>' +
                        '</tr>';
            $("#tbHead thead").append(thead);
            LoadData(1);
            //table line

            var thead = '<tr>' +
                '<th class="text-center">#</th >' +
                '<th>วันที่ขาย</th>' +
                '<th>Series</th>' +
                '<th>Model</th>' +
                '<th>Sink</th>' +
                '<th>Top</th>' +
                '<th class="text-right">จำนวน</th>' +
                '<th class="text-right">ยอดเงิน</th>' +
                '<th>Action</th>' +
                '</tr >';
            $("#tbLine thead").append(thead);

            //--------------------------  Table USER  --------------------------------
            $("#tbUser tbody").empty();
            $.getJSON(
                "/Sodaily/UserAccount",
                function (data) {
                    var tbody = "";
                    $.each(data, function (i, obj) {

                        tbody += '<tr>' +
                            '<td>' + obj.No + '</td>' +
                            '<td>' + obj.StoreId + '</td>' +
                            '<td align="left">' + obj.StoreName + '</td>' +
                            '<td align="left">' + obj.Name + '</td>' +
                            '<td align="left">' + obj.UserName + '</td>' +
                            '<td align="left">' + obj.Password + '</td>' +
                            '<td>' + obj.StoreType + '</td>' +
                            '<td>' + obj.LineCount + '</td>' +
                            '</tr>';
                    });

                    $("#tbUser tbody").append(tbody);
                }
            );

            //--------------------- Button Scroll to Top
            //Get the button
            var mybutton = document.getElementById("myBtn");

            // When the user scrolls down 20px from the top of the document, show the button
            window.onscroll = function () { scrollFunction() };

            function scrollFunction() {

                if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
                    mybutton.style.display = "block";
                } else {
                    mybutton.style.display = "none";
                }
            }

            $("#txtSearch").keyup(function (e) {
                if (e.which == 13) //enter
                {
                    $("#tbHead tbody").empty();
                    if ($("#txtSearch").val() == "") {
                        LoadData(1, $("#txtSearch").val());
                    }
                    else {
                        LoadData(1, $("#txtSearch").val());
                    }
                }
            });
        });

        var active_row = null;
        var highlightRow = function (tr_el) {
            var user = GetUrlParm('u');
            var typeUser = GetUrlParm('t');
            var sumAmount = 0;
            var sumQty = 0;
            var recId = $(tr_el).find('td:first').text();
            //-----------------------------------------------------------------------------

            //-----------------------------------------------------------------------------

            var postData = {
                Username: user,
                RecId: recId
            }

            // Clear highlighting of previous row
            for (var i = 0; active_row && i < active_row.children.length; i++) {
                active_row.children[i].style.removeProperty("background-color");
            }
            // Change saved reference to active row
            active_row = tr_el;
            // Add highlighting to new row
            for (var i = 0; i < active_row.children.length; i++) {
                active_row.children[i].style.backgroundColor = 'lightskyblue';
            }

            $("#recidHead").val(recId);
            $("#recidRefHead").val(recId);
            //--------------------------  Table Line  --------------------------------
            $("#tbLine tbody").empty();
            $.post(
                "/Sodaily/SalesLine",
                postData,
                function (data) {
                    var tbody = "";

                    $.each(data, function (i, obj) {
                        var date = moment(obj.Date).format('DD/MM/YYYY');
                        sumAmount += obj.Amount;
                        sumQty += obj.Qty;
                        tbody += '<tr>' +
                            '<td id="colRecId" style="display:none">' + obj.RecId + '</td>' +
                            '<td class="\text-center\">' + obj.No + '</td>' +
                            '<td>' + obj.Date.substr(0, 10) + '</td>' +
                            '<td>' + obj.Series + '</td>' +
                            '<td>' + obj.Model + '</td>' +
                            '<td>' + obj.Sink + '</td>' +
                            '<td>' + obj.Top + '</td>' +
                            '<td class="text-right">' + obj.Qty.toLocaleString() + '</td>' +
                            '<td class="text-right">' + obj.Amount.toLocaleString() + '</td>' +
                            '<td>' +
                            '<button id="btnEdit"  onclick="return showEditLineRecord(' +
                            "'" + obj.RecId + "'" + "," +
                            "'" + obj.Date.substr(0, 10) + "'" + "," +
                            "'" + obj.Series + "'" + "," +
                            "'" + obj.Model + "'" + "," +
                            "'" + obj.Sink + "'" + "," +
                            "'" + obj.Top + "'" + "," +
                            "'" + obj.Qty.toLocaleString() + "'" + "," +
                            "'" + obj.Amount.toLocaleString() + "'" +
                            ')" type="button" class="btn btn-success btn-fab btn-fab-mini btn-round" data-toggle="modal" data-target="#editLineModal" title="Edit"> ' +
                            '<i class="material-icons">edit</i>' +
                            '</button>' +
                            '<button id="btnDelete" onclick="return showDelLineRecord(' +
                            "'" + obj.RecId + "'" + "," +
                            ')" type="button" class="btn btn-danger btn-fab btn-fab-mini btn-round" data-toggle="modal" data-target="#deleteLineModal" title="Delete"> ' +
                            '<i class="material-icons">delete</i>' +
                            '</button>' +
                            '</td> ' +
                            '</tr>';
                    });

                    tbody += '<tr>' +
                        '<td style="display:none"></td>' +
                            '<td></td>' +
                            '<td></td>' +
                            '<td></td>' +
                            '<td></td>' +
                            '<td></td>' +
                            '<td>รวม</td>' +
                            '<td class="text-right">' + sumQty.toLocaleString() + '</td>' +
                            '<td class="text-right">' + sumAmount.toLocaleString() + '</td>' +
                            '<td></td> ' +
                        '</tr>';
                    $("#tbLine tbody").append(tbody);
                }
            );
            //--------------------------  Gallery  --------------------------------
            //Get images
            $("#gallery").empty();
            $.post(
                "/Sodaily/GetImage",
                postData,
                function (data) {
                    var s = '<div class="row">';
                    $.each(data, function (i, obj) {
                        s += '<div class="row">' +
                            '<div class="col">' +
                            '<div class="card" style="width: 20rem;">' +
                            '<img class="card-img-top" src="' + obj.Base64 + '" data-id="' + obj.Base64 + '" alt="Card image cap">' +
                            '<div class="card-body">' +
                            '<p class="card-text">' + obj.ImageName + '</p>' +
                            '<a href="#0" id="deleteImageDialog" data-toggle="modal" data-target="#imageRemoveModal" onclick="return showDelRecord(' + obj.RecId + ')" class="card-link">Remove</a>' +
                            '</div>' +
                            '</div>' +
                            '</div>' +
                            '</div>';
                    });
                    $("#gallery").html(s);
                }
            );

            //--------------------------  Series  --------------------------------
            var rowpool = "";//get pool

            if (typeUser == '4') {
                rowpool = $(tr_el).find('td:nth-child(5)').text();//get pool
            }
            else
                rowpool = $(tr_el).find('td:nth-child(4)').text();//get pool

            $.getJSON(
                "/Sodaily/Series/" + rowpool,
                function (data) {
                    var s = '<option selected> Choose... </option>';
                    $.each(data, function (i, obj) {
                        s += '<option value="' + obj.Series + '">' + obj.Series + '</option>';
                        $("#seriesLine").html(s);
                        $("#seriesLineEdit").html(s);
                    });
                }
            );
        };

        function headBody(recId, date, i, dtStore, storeId, pool, qty, amount, duedate, salesId, purchId, name, countImg, countLine, createdDate) {
            var user = GetUrlParm('u');
            var type = GetUrlParm('t');
            var case1 = "";
            if (user == "admindev") {
                case1 = '<div class="row"><font color="red">' + createdDate+'</font></div>';
            }
            //User type Area
            if (type == 3) {

            }

            var tr = '<tr onclick="highlightRow(this)">' +
                    '<td id="colRecId" style="display:none">' + recId + '</td>' +
                    '<td class="\text-center\">' + i + '</td>' +
                    '<td>' +
                        '<div class="row">'+ date +'</div>' +
                        '<div class="row"><font color="green">' + duedate + '</font></div>' +
                        case1 +
                    '</td>' +
                    dtStore +
                    '<td id="rowPool">' + pool + '</td>' +
                    '<td align="right">' +
                        qty + '<br />' + amount +
                    '</td>' +
                    '<td>' +
                        //'<div class="row">' +
                        //    '<div class="col"><b><font color="green">SO</font></b> : ' + salesId +  '</div>' +
                        //    '<div class="col"><b><font color="green">PO</font></b> : ' + purchId + '</div>' +
                        //'</div>' +
                        '<div class="row">' +
                            '<div class="col">' + salesId + '</div>' +
                            //'<hr/>' +
                            '<div class="col">' + purchId + '</div>' +
                        '</div>' +
                        '<div class="row">ชื่อลูกค้า : <b>' + name + '</b></div>' +
                     '</td>' +
                '<td>' + countLine + '</td>' +
                '<td>' + countImg + '</td>' +
                     '<td>' +
                        '<button id="btnEdit" onclick="return showEditRecord(' +
                                                            "'" + recId + "'" + "," +
                                                            "'" + date + "'" + "," +
                                                            "'" + duedate + "'" + "," +
                                                            "'" + name + "'" + "," +
                                                            "'" + pool + "'" + "," +
                                                            "'" + storeId + "'" + "," +
                                                            "'" + qty + "'" + "," +
                                                            "'" + amount + "'" + "," +
                                                            "'" + purchId + "'" + "," +
                                                            "'" + salesId + "'" +
                        ')" type="button" class="btn btn-success btn-fab btn-fab-mini btn-round" data-toggle="modal" data-target="#editModal" title="Edit"> ' +
                            '<i class="material-icons">edit</i>' +
                        '</button>' +

                        '<button id="btnDelete" onclick="return showDelRecord(' + "'" + recId + "'" +
                        ')" type="button" class="btn btn-danger btn-fab btn-fab-mini btn-round" data-toggle="modal" data-target="#deleteModal" title = "Delete" > ' +
                        '<i class="material-icons">delete</i>' +
                        '</button>' +
                        //'<button id="btnAddImg" onclick="return showAddImage(' + "'" + recId + "'" +
                        //')" type="button" class="btn btn-info btn-round btn-sm" data-badge="6" data-toggle="modal" data-target="#addImgModal" title="Add image"> ' +
                        //'<i class="material-icons">add_photo_alternate</i> ' + countImg
                        //'</button>' +
                    '</td> ' +
                '</tr>';

            return tr;
        }

        function LoadData(page, search) {
            var user = GetUrlParm('u');
            var type = GetUrlParm('t');
            var InOut = GetUrlParm('o');
            //--------------------------  Load data --------------------------------
            //alert(InOut);
            if (InOut == "0") {
                window.location.href = "http://localhost:53294/View/Login.html";
            }
            else {
                var postData = {
                    Username: user,
                    Page: page,
                    PageSize: 20,
                    TextSearch: search,
                    UserType: type
                }

                $.post(
                    "/Sodaily/LoadDataV2",
                    postData,
                    function (data) {
                        var tbody = "";
                        var p = "";
                        var dateSO = "", confDate = "";

                        var shownum = '', salesId = '';
                        var entries = '';
                        var startpage = 0;
                        var endpage = 0;
                        var currentpage = 0;
                        var totalpages = 0;

                        $.each(data, function (i, obj) {
                            var date = moment(obj.Date).format('DD/MM/YYYY');
                            var duedate = moment(obj.ConfirmDate).format('DD/MM/YYYY');
                            var tdStore = '<td>' + obj.StoreId + '</td>';

                            shownum = obj.Showing;
                            entries = obj.Entries;
                            startpage = obj.StartPage;
                            endpage = obj.EndPage;
                            currentpage = obj.CurrentPage;
                            totalpages = obj.TotalPage;

                            if (obj.Date.substr(0, 10) != "01/01/1900") {
                                dateSO = obj.Date.substr(0, 10);
                            }
                            if (obj.ConfirmDate.substr(0, 10) != "01/01/1900") {
                                confDate = obj.ConfirmDate.substr(0, 10);
                            }

                            if (type == "1") {
                                tdStore = "";
                            }

                            i++;
                            tbody += headBody(
                                obj.RecId,
                                dateSO,
                                obj.No,
                                tdStore,
                                obj.StoreId,
                                obj.Pool,
                                obj.Qty.toLocaleString(),
                                obj.Amount.toLocaleString(),
                                confDate,
                                obj.SalesId,
                                obj.PurchId,
                                obj.CustName,
                                obj.ImageCount,
                                obj.LineCount,
                                obj.CreatedDate.substr(0, 10)
                            );

                        });

                        $("#tbHead tbody").append(tbody);
                        $("#paging").empty();

                        //=============================================== Footer ===================================================

                        p = '<nav aria-label="Page">' +
                            '<ul class="pagination  justify-content-end" id="pages">';
                        p += '<li class="paginate_button page-item" style="padding-right:350px">' +
                            '<a class="page-link">' +
                            'Showing   ' +
                            '<span style="font-weight:bold">' +
                            '<span class="badge badge-info"> ' + shownum + '</span>' +
                            '</span>' +
                            '   out of   ' +
                            '<span style="font-weight:bold">' +
                            '<span class="badge badge-info">' + entries + '</span>' +
                            '</span>' +
                            '   entries' +
                            '</a>' +
                            '</li>';

                        if (endpage > 1) {
                            if (currentpage == 1) {
                                p += '<li class="page-item disabled">' +
                                    '<span class="page-link">Previous</span>' +
                                    '</li>';
                            }
                            else {
                                p += '<li class="page-item">' +
                                    '<span class="page-link">Previous</span>' +
                                    '</li>';
                            }
                            var pagev = 0;
                            var i = 1;
                            var lastPage;
                            var count = 5;

                            pagev = startpage;

                            //
                            if (totalpages <= 5)
                                count = totalpages;

                            for (i = 1; i <= count; i++) {
                                if (pagev == currentpage) {
                                    p += '<li class="page-item active">' +
                                        '<span class="page-link">' +
                                        pagev +
                                        '</span>' +
                                        '</li>';
                                    //lastPage = pagev + 1;
                                }
                                else {
                                    p += '<li class="page-item"><a class="page-link" href="#tbHead&page=' + pagev + '" onClick="getPage(' + pagev + ')">' + pagev + '</a></li>';
                                }
                                pagev++;
                            }

                            if (currentpage < totalpages - 2) {
                                p += '...<li class="page-item"><a class="page-link" href="#tbHead" onClick="getPage(' + totalpages + ')">' + totalpages + '</a></li>';
                            }

                            if (currentpage < totalpages) {
                                p += '<li class="page-item">' +
                                    '<a class= "page-link" href="#tbHead&page=' + currentpage++ + '" onClick="getPage(' + currentpage++ + ')"> Next</a>' +
                                    '</li>';
                            }

                            p += '</ul></nav>';
                            $("#paging").append(p);
                        }
                    }
                );
            }
           
        }

        function GetUrlParm(sParam) {
            var sPageURL = window.location.search.substring(1);
            var sURLVariables = sPageURL.split('&');
            for (var i = 0; i < sURLVariables.length; i++) {
                var sParameterName = sURLVariables[i].split('=');
                if (sParameterName[0] == sParam) {
                    return sParameterName[1];
                }
            }
        }
         
        function searchUser() {
            // Declare variables
            var input, filter, table, tr, td, i, body;
            input = document.getElementById("txtSearch");
            filter = input.value.toUpperCase();
            table = document.getElementById("tbUser");

            tr = table.getElementsByTagName("tr");
            for (var i = 0; i < tr.length; i++) {
                var tds = tr[i].getElementsByTagName("td");
                var flag = false;
                for (var j = 0; j < tds.length; j++) {
                    var td = tds[j];
                    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        flag = true;
                    }
                }
                if (flag) {
                    tr[i].style.display = "";
                }
                else {
                    tr[i].style.display = "none";
                }
            }

        }

        function showEditRecord(recId, date, duedate, name, pool, store, qty, amount, po, so) {
            $("#recIdEdit").val(recId);
            $("#orderDateEdit").val(date);
            $("#confirmDateEdit").val(duedate);
            $("#custNameEdit").val(name);
            $("#storeidEdit").val(store);
            $("#poolEdit").val(pool);
            $("#qtyEdit").val(qty);
            $("#amountEdit").val(amount);
            $("#poEdit").val(po);
            $("#soEdit").val(so);
        }
        function showDelRecord(recid) {
            $("#recIdDelete").val(recid);
        }
        function showAddImage(recid) {
            $("#txtRecId").val(recid);
        }

        function showEditLineRecord(recId, date, series, model, sink, top, qty, amount) {
            $("#recIdEditLine").val(recId);
            $("#seriesLineEdit").val(series);
            $("#orderDateLineEdit").val(date);
            $("#sinkLineEdit").val(sink);
            $("#topLineEdit").val(top);
            $("#qtyLineEdit").val(qty);
            $("#amountLineEdit").val(amount);

            $.getJSON(
                "/Sodaily/Model/" + series,
                function (data) {
                    var s = '<option selected> Choose... </option>';
                    $.each(data, function (i, obj) {
                        if (obj.Model == model) {
                            s += '<option value="' + obj.Model + '" selected>' + obj.Model + '</option>';
                        }
                        else {
                            s += '<option value="' + obj.Model + '">' + obj.Model + '</option>';
                        }

                        $("#modelLineEdit").html(s);
                    });
                }
            );
        }
        function showDelLineRecord(recId) {
            $("#recIdDeleteEdit").val(recId);
        }

        //Store ID
        $.getJSON(
            "/Sodaily/GetStored/" + GetUrlParm('u'),
            function (data) {
                var user = GetUrlParm('u');
                var type = GetUrlParm('t');
                var typeName = "";
                var s = '<option selected> Choose... </option>';
                $.each(data, function (i, obj) {
                    s += '<option value="' + obj.StoreId + '">' + obj.StoreId + " - " + obj.StoreName + '</option>';
                    $("#storeid").html(s);
                    $("#storeidEdit").html(s);

                    //type Sales
                    if (type == "4") {
                        //$("#hUserName").text("Admin");
                        $("#hUser").text("Admin");
                        $("#typeName").text("Admin");
                    }
                    else {

                        if (type == "1") {
                            $("#hUser").text(obj.StoreId + " - " + obj.StoreName);
                            $("#hUserName").text(obj.UserAccount + " (" + user + ") ");
                            $("#typeName").text("Sales");
                        }
                        else {
                           //$("#hUser").text(obj.StoreId + " สาขา");
                            $("#hUserName").text(obj.UserAccount + " (" + user + ") ");

                            if (type == "2") {
                                typeName = "Manager";
                            }
                            else if (type == "3") {
                                typeName = "Area";
                            }
                            $("#typeName").text(typeName);

                        }
                       
                    }

                    //if (type == "1") {
                    //    $("#hUser").text(user + " : " + obj.StoreId + " - " + obj.StoreName);
                    //    $("#hUserName").text(obj.UserAccount);
                    //}
                    //else {
                    //    if (type == "4") {
                    //        $("#hUserName").text("Admin");
                    //        $("#hUser").text("Admin");
                    //    }
                    //    else {
                    //        $("#hUserName").text(obj.UserAccount);
                    //        $("#hUser").text(user);
                    //    }
                    //}
                });
            }
        );

        //Pool
        $.getJSON(
            "/Sodaily/SalesPool/",
            function (data) {
                var s = '<option selected> Choose... </option>';
                $.each(data, function (i, obj) {

                    if (obj.PoolId != "BUILT-IN" &&
                        obj.PoolId != "COMPACT-DC" &&
                        obj.PoolId != "Loose Fur" &&
                        obj.PoolId != "Wardrobe" &&
                        obj.PoolId != "PRO" &&
                        obj.PoolId != "Mogen") {
                        s += '<option value="' + obj.PoolId + '">' + obj.Name + '</option>';
                        $("#pool").html(s);
                        $("#poolEdit").html(s);
                    }

                });

            }
        );

        function onNewHeader() {
            var postData = {
                Date: $("#orderDate").val(),
                StoreId: $("#storeid").val(),
                Pool: $("#pool").val(),
                Qty: $("#qty").val(),
                Amount: $("#amount").val(),
                CustName: $("#custName").val(),
                SalesId: $("#so").val(),
                PurchId: $("#po").val(),
                ConfirmDate: $("#confirmDate").val()
            };

            $.post("/Sodaily/Create",
                postData,
                function (data) {
                    $('#msgModal').modal('toggle');

                    $("#tbHead tbody").empty();
                    LoadData(1);
                }
            );
        };
        function onEdit() {

            var postData = {
                RecId: $("#recIdEdit").val(),
                Date: $("#orderDateEdit").val(),
                ConfirmDate: $("#confirmDateEdit").val(),
                StoreId: $("#storeidEdit").val(),
                Pool: $("#poolEdit").val(),
                Qty: $("#qtyEdit").val(),
                Amount: $("#amountEdit").val(),
                CustName: $("#custNameEdit").val(),
                SalesId: $("#soEdit").val(),
                PurchId: $("#poEdit").val()

            };
            //alert(user +" "+ type);
            $.post("/Sodaily/edit",
                postData,
                function (data) {
                    //$(".modal-backdrop").remove();
                    //$("#editModal").hide();
                    $('#editModal').modal('toggle');

                    $("#tbHead tbody").empty();
                    LoadData(1);

                }
            );
        }
        function onDelete() {
            var postData = {
                RecId: $("#recIdDelete").val()
            };
            //alert(user +" "+ type);
            $.post("/Sodaily/delete",
                postData,
                function (data) {
                    $('#deleteModal').modal('toggle');

                    $("#tbHead tbody").empty();
                    LoadData(1);
                }
            );
        }
        function onAddImage() {
            //---------------------- Add image -------------------------

            var recid = $("#txtRecId").val();
            var user = GetUrlParm('u');
            var data = new FormData();
            var files = $("#fileUpload").get(0).files;

            // Add the uploaded image content to the form data collection
            if (files.length > 0) {
                for (var i = 0; i < files.length; i++) {
                    data.append("", files[i]); //"UploadedImage"
                }
                data.append("User", user);
                data.append("RecId", recid);
            }

            //save image
            $.ajax({
                type: "POST",
                //url: "http://starmark.work/axaosservicetest/sodaily/UploadFile",
                url: "http://localhost:53294/sodaily/UploadFile",
                //url: "http://starmark.work/axaosservice/sodaily/UploadFile",
                contentType: false,
                processData: false,
                data: data,
                success: function (data) {
                    alert(data);
                    $("#fileUpload").val("");
                }
            });

            ////close modal
            $('#addImgModal').modal('toggle');
        }

        function onNewLine() {
            var user = GetUrlParm('u');
            var postData = {
                Date: $("#orderDateLine").val(),
                Series: $("#seriesLine").val(),
                Model: $("#modelLine").val(),
                Qty: $("#qtyLine").val(),
                Amount: $("#amountLine").val(),
                Sink: $("#sinkLine").val(),
                StoreId: $("#topLine").val(),
                RecIdHeader: $("#recidHead").val(),
                UserName: user
            };
            //alert(user +" "+ type);
            $.post("/Sodaily/CreateLine",
                postData,
                function (data) {
                    $('#newLineModal').modal('toggle');
                }
            );
        }
        function onEditLine() {

            var postData = {
                RecId: $("#recIdEditLine").val(),
                Date: $("#orderDateLineEdit").val(),
                Series: $("#seriesLineEdit").val(),
                Model: $("#modelLineEdit").val(),
                Qty: $("#qtyLineEdit").val(),
                Amount: $("#amountLineEdit").val(),
                Sink: $("#sinkLineEdit").val(),
                StoreId: $("#topLineEdit").val(),
                RecIdHeader: $("#recidHead").val()
            };
            //alert(user +" "+ type);
            $.post("/Sodaily/EditLine",
                postData,
                function (data) {
                    $('#editLineModal').modal('toggle');

                }
            );
        }
        function onDeleteLine() {
            var postData = {
                RecId: $("#recIdDeleteEdit").val()
            };
            //alert(user +" "+ type);
            $.post("/Sodaily/DeleteLine",
                postData,
                function (data) {
                    $('#deleteLineModal').modal('toggle');

                }
            );
        }

        function getCalendar(pool) {
            $("#calendar").empty();
            //---------------------------- Calendar ---------------------------------------------------------
            //document.addEventListener('DOMContentLoaded', function () {
                var calendarEl = document.getElementById('calendar');
    
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    plugins: ['interaction', 'dayGrid', 'timeGrid', 'list'],
                    header: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
                    },
                    //defaultDate: '2019-08-12',
                    navLinks: true, // can click day/week names to navigate views
                    businessHours: true, // display business hours
                    editable: true,
                    eventColor: '#BEFBC4',
                    events: {
                        url: '/sodaily/Booking/' + pool,
                        //rendering: 'background',
                        //color: '#F73023',
                        error: function () {
                            $('#script-warning').show();
                        }
                    },
                    eventLimit: true, // for all non-TimeGrid views
                    views: {
                        timeGrid: {
                            eventLimit: 1 // adjust to 6 only for timeGridWeek/timeGridDay
                        }
                    },
                    eventClick: function (info) {
                        var month = info.event.start.getMonth() + 1;

                        try {
                            $("#tbBooking tbody tr").empty();

                            //$("body").css("cursor", "progress");

                            $.getJSON('/sodaily/BookingDetail/' + info.event.start.getFullYear() + '-' + month + '-' + info.event.start.getDate() + '/' + pool, function (data) {
                                $.each(data, function (key, val) {
                                    $('#tbBooking tr:last').after(
                                        '<tr>' +
                                            '<td>' + val.Date.substr(0, 10) + '</td>' +
                                            '<td>' + val.StoreId + '</td>' +
                                            '<td>' + val.SalesId + '</td>' +
                                            '<td>' + val.PurchId + '</td>' +
                                            '<td>' + val.CustName + '</td>' +
                                            '<td>' + val.Pool + '</td>' +
                                            '<td>' + val.Qty.toLocaleString() + '</td>' +
                                            '<td>' + val.Amount.toLocaleString() + '</td>' +
                                        '</tr> '); //Qty
                                });
                            });
                            $('#DemoModal').modal('toggle');
                        }
                        catch (err) {
                            alert(err);
                        }
                        finally {
                            $("body").css("cursor", "default");
                        }
                        // change the border color just for fun
                        info.el.style.borderColor = 'green';
                    }
                });
            calendar.setOption('locale', 'th');
            calendar.render();
        //--------------------------------------------------------------------------
        }
        function onBuiltIn() {
            $("#btnBuiltIn").removeClass("btn btn-default").addClass("btn btn-info");
            $("#btnCompact").removeClass("btn btn-info").addClass("btn btn-default");
            $("#remark").text("*** การวางงาน BUILT - IN : จันทร์ - เสาร์ ไม่เกิน 8 ชุด");
            getCalendar("BUILT-IN");
        }
        function onCompact() {
            $("#btnCompact").removeClass("btn btn-default").addClass("btn btn-info");
            $("#btnBuiltIn").removeClass("btn btn-info").addClass("btn btn-default");
            $("#remark").text("*** การวางงาน COMPACT & DIY : จันทร์-ศุกร์ ไม่เกิน 12 ชุด / เสาร์ ไม่เกิน 20 ชุด");
            getCalendar("COMPACT");
        }

        function taphome() {
            $('#btnNewOrder').css('display', 'inherit');
            $('#btnNewOrderLine').css('display', 'None');
            $('#btnAddImage').css('display', 'None');
        }
        function tapLine() {
            $('#btnNewOrder').css('display', 'None');
            $('#btnNewOrderLine').css('display', 'inherit');
            $('#btnAddImage').css('display', 'None');
        }
        function tapGallery() {
            $('#btnNewOrder').css('display', 'None');
            $('#btnNewOrderLine').css('display', 'None');
            $('#btnAddImage').css('display', 'inherit');
        }
        function tapBooking() {
            $('#btnNewOrder').css('display', 'None');
            $('#btnNewOrderLine').css('display', 'None');
            $('#btnAddImage').css('display', 'None');
        }

        //change format date in modal
        function onNewOrderBtn() {
            var fullDate = new Date()
            var twoDigitMonth = ((fullDate.getMonth().length + 1) === 1) ? (fullDate.getMonth() + 1) : '0' + (fullDate.getMonth() + 1);
            //var twoDigitDate = ((fullDate.getDate().length + 1) === 1) ? (fullDate.getDate() + 1) : '0' + (fullDate.getDate());
            var date = fullDate.getDate();
            if (fullDate.getDate() < 10) {
                date = '0' + (fullDate.getDate());
            }
            var currentDate = date + "/" + twoDigitMonth + "/" + fullDate.getFullYear();

            $("#orderDate").val(currentDate);
            $("#orderDateLine").val(currentDate);
        }

        function changeSeries() {

            //--------------------------  Model  --------------------------------

            $.getJSON(
                "/Sodaily/Model/" + $("#seriesLine").val(),
                function (data) {
                    var s = '<option selected> Choose... </option>';
                    $.each(data, function (i, obj) {
                        s += '<option value="' + obj.Model + '">' + obj.Model + '</option>';
                        $("#modelLine").html(s);
                        $("#modelLineEdit").html(s);
                    });
                }
            );
        }
        function changeSeriesEdit() {

            //--------------------------  Model edit  --------------------------------

            $.getJSON(
                "/Sodaily/Model/" + $("#seriesLineEdit").val(),
                function (data) {
                    var s = '<option selected> Choose... </option>';
                    $.each(data, function (i, obj) {
                        s += '<option value="' + obj.Model + '">' + obj.Model + '</option>';
                        $("#modelLineEdit").html(s);
                    });
                }
            );
        }

        function getPage(page) {

            $("#tbHead tbody").empty();
            LoadData(page);
        }

        function refreshData() {
            LoadData();
        }
        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 600;
            document.documentElement.scrollTop = 600;
        }

        function branch() {
            //Store ID
            $.getJSON(
                "/Sodaily/GetStored/" + GetUrlParm('u'),
                function (data) {
                    var user = GetUrlParm('u');
                    var type = GetUrlParm('t');
                    var s = '';
                    $.each(data, function (i, obj) {
                        s += obj.StoreId + " - " + obj.StoreName + "<br />";
                    });
                }
            );
            $('#txtBranch').val(s);
            $('#BranchModal').modal('toggle');
        }

        $(document).on("click", "#openImageDialog", function () {
            var myImageId = $(this).data('id');
            $(".modal-body #myImage").attr("src", myImageId);
        });

        $(document).on("click", "#deleteImageDialog", function () {
            var name = $(this).data('id');
            $(".modal-body #txtName").val(name);
        });

    </script>
    <style>
    @font-face { font-family: "Anantason-Regular"; src: url(../Font/Anantason-Regular/Anantason-Regular.ttf); }
        #myBtn {
            display: none; /* Hidden by default */
            position: fixed; /* Fixed/sticky position */
            bottom: 20px; /* Place the button at the bottom of the page */
            right: 30px; /* Place the button 30px from the right */
            z-index: 99; /* Make sure it does not overlap */
            border: none; /* Remove borders */
            outline: none; /* Remove outline */
            background-color: red; /* Set a background color */
            color: white; /* Text color */
            cursor: pointer; /* Add a mouse pointer on hover */
            padding: 15px; /* Some padding */
            border-radius: 10px; /* Rounded corners */
            font-size: 18px; /* Increase font size */
        }

            #myBtn:hover {
                background-color: #555; /* Add a dark-grey background on hover */
            }

        .badge1 {
            position: relative;
        }

            .badge1[data-badge]:after {
                content: attr(data-badge);
                position: absolute;
                top: -3px;
                right: -3px;
                font-size: .5em;
                background: green;
                color: white;
                width: 18px;
                height: 18px;
                text-align: center;
                line-height: 18px;
                border-radius: 50%;
                box-shadow: 0 0 1px #333;
            }
    </style>
</head>
<body class="index-page sidebar-collapse">
    <div class="page-header header-filter clear-filter purple-filter" data-parallax="true" style="background-image:url(../../material-kit-master/assets/img/bg2.jpg);">
        <div class="container">
            <div class="row">
                <div class="col-md-8 ml-auto mr-auto">

                    <div class="brand">
                        <h1>Sales order daily</h1>
                        <h3>You can check the information in Microsoft Dynamic AX at : Sales and maketing > Periodic > STM Periodic > STM SalesSoDaily</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="main main-raised" style="background-color:whitesmoke">
        <div class="section">
            <div class="container">
                <div class="bd-callout bd-callout-warning">
                    <div class="row" >
                        <div class="col-8">
                            <h4 class="title" id="hUser" onclick="branch()"></h4>
                            <p id="hStore"></p>
                        </div>
                        <div class="col-3" style="align-items:flex-end">
                            <div class="input-group-prepend">
                                <span class="input-group-text">
                                    <i class="material-icons">person</i>
                                    <h4 class="title" id="hUserName"></h4><span id="typeName" class="badge badge-pill badge-default" style="height:20px">Sales</span>
                                </span>
                            </div>
                        </div>
                        <div class="col-1" style="padding-top:30px">
                            <button id="btnLogout" class="btn btn-default btn-fab btn-fab-mini btn-round" title="Logout" onclick="window.location.href='http://localhost:53294/View/Login.html?o=0'">
                                <i class="material-icons">exit_to_app</i>
                            </button>
                        </div>
                    </div>
                </div>

                <button onclick="topFunction()" id="myBtn" title="Go to top"> <i class="material-icons">keyboard_arrow_up</i></button>
                <div class="row">
                    <!---------------------------------------------- New order ---------------------------------------------------->
                    <div class="col-md-8" style="padding-top:20px">
                        <div class="row">
                            <!--<div class="col-sm-1">
                                <button class="btn btn-success btn-fab bmd-btn-fab-sm btn-round" id="btnCalendar">
                                    <i class="material-icons">event</i>
                                </button>
                            </div>-->
                            <div class="col">
                                <button class="btn btn-primary btn-round" id="btnNewOrder" onclick="onNewOrderBtn()" data-toggle="modal" data-target="#msgModal">
                                    <i class="material-icons">add_circle_outline</i> New order
                                </button>

                                <button class="btn btn-info btn-round" id="btnNewOrderLine" onclick="onNewOrderBtn()" data-toggle="modal" data-target="#newLineModal" style="display:none">
                                    <i class="material-icons">add_circle_outline</i> New order line
                                </button>

                                <button class="btn btn-success btn-round" id="btnAddImage"  data-toggle="modal" data-target="#addImgModal" style="display:none">
                                    <i class="material-icons">add_photo_alternate</i> Add image
                                </button>
                            </div>
                        </div>

                    </div>
                    <!---------------------------------------------- Search ---------------------------------------------------->
                    <div class="col-md-4">
                        <div class="row">
                            <div class="col-md-9" style="padding:0px">
                                <div class="form-group no-border">
                                    <input type="text" id="txtSearch" class="form-control" onkeyup="searchUser()" placeholder="Search">
                                </div>
                            </div>
                            <div class="col-md-3" style="padding-top:10px; padding-left:0px">
                                <button type="button" id="btnSearch" class="btn btn-white btn-just-icon btn-round">
                                    <i class="material-icons">search</i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card card-nav-tabs">

                    <div class="card-header card-header-primary">
                        <div class="nav-tabs-navigation">
                            <div class="nav-tabs-wrapper">
                                <ul class="nav nav-tabs" data-tabs="tabs">
                                    <li class="nav-item">
                                        <a class="nav-link active" href="#home" onclick="taphome()" data-toggle="tab">
                                            <i class="material-icons">home</i>
                                            Home
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#line" onclick="tapLine()" data-toggle="tab">
                                            <i class="material-icons">list</i>
                                            รายการ
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#gallery" onclick="tapGallery()" data-toggle="tab">
                                            <i class="material-icons">photo_album</i>
                                            Gallery
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#Booking" onclick="tapBooking()" data-toggle="tab">
                                            <i class="material-icons">event</i>
                                            Booking
                                        </a>
                                    <li class="nav-item" id="tabAdmin">
                                        <a class="nav-link" href="#detail" onclick="tapDetail()" data-toggle="tab">
                                            <i class="material-icons">photo_library</i>
                                            Detail (Admin)
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card-body ">
                        <div class="tab-content text-center">
                            <div class="tab-pane active" id="home">
                                <form>
                                    <font size="2" face="Anantason-Regular">
                                        <table class="table table-hover" id="tbHead">
                                            <thead></thead>
                                            <tbody></tbody>
                                        </table>

                                        <div id="paging"></div>
                                    </font>
                                </form>
                            </div>

                            <div class="tab-pane" id="line">
                                <form>
                                    <input type="text" class="form-control" style="display:none" id="recidHead">
                                    <font size="2" face="Anantason-Regular">
                                        <table class="table table-hover" id="tbLine">
                                            <thead></thead>
                                            <tbody></tbody>
                                        </table>
                                    </font>

                                </form>
                            </div>

                            <div class="tab-pane" id="gallery">
                                <form>
                                    <input type="text" class="form-control" style="display:none" id="recidRefHead">
                                    <div class="row">
                                        <div class="col">
                                            <div class="card" style="width: 20rem;">
                                                <img id="openImageDialog" class="card-img-top" src="https://images.unsplash.com/photo-1517303650219-83c8b1788c4c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=bd4c162d27ea317ff8c67255e955e3c8&auto=format&fit=crop&w=2691&q=80" data-toggle="modal"
                                                     data-target="#imagemodal" alt="Card image cap">
                                                <div class="card-body">
                                                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                                    <a href="#0" id="deleteImageDialog" data-toggle="modal" data-target="#imageRemoveModal" class="card-link">Remove</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="card" style="width: 20rem;">
                                                <img id="openImageDialog" class="card-img-top" src="https://images.unsplash.com/photo-1517303650219-83c8b1788c4c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=bd4c162d27ea317ff8c67255e955e3c8&auto=format&fit=crop&w=2691&q=80" data-toggle="modal"
                                                     data-target="#imagemodal" alt="Card image cap">
                                                <div class="card-body">
                                                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                                    <a href="#0" id="deleteImageDialog" data-toggle="modal" data-target="#imageRemoveModal" class="card-link">Remove</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="card" style="width: 20rem;">
                                                <img id="openImageDialog" class="card-img-top" src="https://images.unsplash.com/photo-1517303650219-83c8b1788c4c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=bd4c162d27ea317ff8c67255e955e3c8&auto=format&fit=crop&w=2691&q=80" data-toggle="modal"
                                                     data-target="#imagemodal" alt="Card image cap">
                                                <div class="card-body">
                                                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                                    <a href="#0" id="deleteImageDialog" data-toggle="modal" data-target="#imageRemoveModal" onclick="return showDelRecord(recId)" class="card-link">Remove</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                               

                            </div>

                            <div class="tab-pane" id="detail">
                                <form>
                                    <font size="2" face="Anantason-Regular">
                                        <table class="table table-hover" id="tbUser">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Store</th>
                                                    <th>Store name</th>
                                                    <th>Name</th>
                                                    <th>Username</th>
                                                    <th>Password</th>
                                                    <th>Type</th>
                                                    <th>Order</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>

                                        <div id="pagingUser"></div>
                                    </font>
                                </form>
                            </div>

                            <div class="tab-pane" id="Booking">
                                <div>
                                    <font size="2" face="Anantason-Regular">
                                        <div class="btn-group" role="group">
                                            <button type="button" id="btnBuiltIn" onclick="onBuiltIn()" class="btn btn-default">BUILT-IN</button>
                                            <button type="button" id="btnCompact" onclick="onCompact()" class="btn btn-default">Compact</button>
                                        </div>
                                        <div id="remark" style="color:red;"></div>
                                        <div id="calendar" class="demos__main-container">
                                        </div>
                                    </font>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Modal New order -->
    <div class="modal fade" id="msgModal" tabindex="-1" role="dialog" aria-labelledby="msgModal" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="msgModalLabel">New order</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 ml-auto">
                            <div class="col-md-12">
                                <!----------------------------- Sales order daily ------------------------->
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title">Sales order daily</h4>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">วันที่ขาย</label>
                                            <input type="text" class="form-control datepicker" id="orderDate" onkeyup="selectDate()">
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label for="storeid">Store Id</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="storeid"></select>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label for="pool">Pool</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="pool"></select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">จำนวน</label>
                                            <input type="number" class="form-control" id="qty">
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">ยอดเงินรวม</label>
                                            <input type="number" class="form-control" id="amount">
                                        </div>
                                    </div>
                                </div>
                                <!----------------------------- Customer ------------------------->
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title">Customer</h4>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">ชื่อ - นามสกุล</label>
                                            <input type="text" class="form-control" id="custName">
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group bmd-form-group is-filled">
                                                    <label class="label-control bmd-label-static">Sales order</label>
                                                    <input type="text" class="form-control" id="so">
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group bmd-form-group is-filled">
                                                    <label class="label-control bmd-label-static">Purchase order</label>
                                                    <input type="text" class="form-control" id="po">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">วันที่ติดตั้ง</label>
                                            <input type="text" class="form-control datepicker" id="confirmDate">
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="btnCreate" class="btn btn-primary" onclick="onNewHeader()">Create</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Edit order -->
    <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModal" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit order</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 ml-auto">
                            <div class="col-md-12">
                                <!----------------------------- Sales order daily ------------------------->
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title">Sales order daily</h4>
                                        <input type="text" class="form-control" id="recIdEdit" style="display:none">
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">วันที่ขาย</label>
                                            <input type="text" class="form-control datepicker" id="orderDateEdit" onkeyup="selectDate()">
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label for="storeid">Store Id</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="storeidEdit"></select>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label for="pool">Pool</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="poolEdit"></select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">จำนวน</label>
                                            <input type="number" class="form-control" id="qtyEdit">
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">ยอดเงินรวม</label>
                                            <input type="number" class="form-control" id="amountEdit">
                                        </div>
                                    </div>
                                </div>
                                <!----------------------------- Customer ------------------------->
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title">Customer</h4>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">ชื่อ - นามสกุล</label>
                                            <input type="text" class="form-control" id="custNameEdit">
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group bmd-form-group is-filled">
                                                    <label class="label-control bmd-label-static">Sales order</label>
                                                    <input type="text" class="form-control" id="soEdit">
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group bmd-form-group is-filled">
                                                    <label class="label-control bmd-label-static">Purchase order</label>
                                                    <input type="text" class="form-control" id="poEdit">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">วันที่ติดตั้ง</label>
                                            <input type="text" class="form-control datepicker" id="confirmDateEdit">
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="btnEdit" class="btn btn-primary" onclick="onEdit()">Save change</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Delete order -->
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <!--<h5 class="modal-title" id="msgModalLabel">Message</h5>-->
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 ml-auto">
                            <div class="col-md-12">
                                <div class="icon icon-danger" style="padding-left:100px">
                                    <i class="material-icons" style="padding-left:100px">clear</i>
                                </div>
                                <div class="description" style="padding-left:0px">
                                    <h4 class="info-title">Are you sure you want to delete this Oreder?</h4>
                                </div>
                                <div class="form-group bmd-form-group is-filled" style="display:none">
                                    <label class="label-control bmd-label-static">RecId</label>
                                    <input type="text" class="form-control" id="recIdDelete">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" onclick="onDelete()">Delete</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal add image -->
    <div class="modal fade" id="addImgModal" tabindex="-1" role="dialog" aria-labelledby="addImgModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="msgModalLabel">Add image</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 ml-auto">
                            <div class="col-md-12">
                                <div class="fileinput fileinput-new text-center" data-provides="fileinput">
                                    <input type="text" class="form-control" id="txtRecId" style="display:none" />
                                    <div class="fileinput-preview fileinput-exists thumbnail img-raised"></div>
                                    <div>
                                        <span class="btn btn-raised btn-round btn-default btn-file">
                                            <input type="file" id="fileUpload" name="..." />
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" onclick="onAddImage()">Add</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal New order line -->
    <div class="modal fade" id="newLineModal" tabindex="-1" role="dialog" aria-labelledby="newLineModal" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newLineModalLabel">New order line</h5>
                    <button type="button" id="btnGetNewLine" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 ml-auto">
                            <div class="col-md-12">
                                <!----------------------------- Sales order daily ------------------------->
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title">Sales order daily</h4>

                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">วันที่ขาย</label>
                                            <input type="text" class="form-control datepicker" id="orderDateLine" onkeyup="selectDate()">
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label for="storeid">Series</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="seriesLine" onchange="changeSeries()"></select>
                                                </div>
                                            </div>
                                            <div class="col-sm-5">
                                                <div class="form-group">
                                                    <label for="pool">Model</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="modelLine"></select>
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="form-group">
                                                    <label for="pool">Sink</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="sinkLine">
                                                        <option selected>Choose...</option>
                                                        <option value="L">L</option>
                                                        <option value="R">R</option>
                                                        <option value="NS_L">NS_L</option>
                                                        <option value="NS_R">NS_R</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="form-group">
                                                    <label for="pool">Top</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="topLine">
                                                        <option selected>Choose...</option>
                                                        <option value="B">B</option>
                                                        <option value="W">W</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">จำนวน</label>
                                            <input type="number" class="form-control" id="qtyLine">
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">ยอดเงิน</label>
                                            <input type="number" class="form-control" id="amountLine">
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="btnNewLine" class="btn btn-primary" onclick="onNewLine()">Create</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Edit order line -->
    <div class="modal fade" id="editLineModal" tabindex="-1" role="dialog" aria-labelledby="editLineModal" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editLineModalLabel">Edit order</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 ml-auto">
                            <div class="col-md-12">
                                <!----------------------------- Sales order daily ------------------------->
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title">Sales order daily</h4>
                                        <input type="text" class="form-control" style="display:none" id="recIdEditLine">
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">วันที่ขาย</label>
                                            <input type="text" class="form-control datepicker" id="orderDateLineEdit" onkeyup="selectDate()">
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label for="storeid">Series</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="seriesLineEdit" onchange="changeSeriesEdit()"></select>
                                                </div>
                                            </div>
                                            <div class="col-sm-5">
                                                <div class="form-group">
                                                    <label for="pool">Model</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="modelLineEdit"></select>
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="form-group">
                                                    <label for="pool">Sink</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="sinkLineEdit">
                                                        <option selected>Choose...</option>
                                                        <option value="L">L</option>
                                                        <option value="R">R</option>
                                                        <option value="NS_L">NS_L</option>
                                                        <option value="NS_R">NS_R</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="form-group">
                                                    <label for="pool">Top</label>
                                                    <select class="form-control selectpicker" data-style="btn btn-link" id="topLineEdit">
                                                        <option selected>Choose...</option>
                                                        <option value="B">B</option>
                                                        <option value="W">W</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">จำนวน</label>
                                            <input type="number" class="form-control" id="qtyLineEdit">
                                        </div>
                                        <div class="form-group bmd-form-group is-filled">
                                            <label class="label-control bmd-label-static">ยอดเงิน</label>
                                            <input type="number" class="form-control" id="amountLineEdit">
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="btnEdit" class="btn btn-primary" onclick="onEditLine()">Save change</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Delete order line -->
    <div class="modal fade" id="deleteLineModal" tabindex="-1" role="dialog" aria-labelledby="deleteLineModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <!--<h5 class="modal-title" id="msgModalLabel">Message</h5>-->
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 ml-auto">
                            <div class="col-md-12">
                                <div class="icon icon-danger" style="padding-left:100px">
                                    <i class="material-icons" style="padding-left:100px">clear</i>
                                </div>
                                <div class="description" style="padding-left:0px">
                                    <h4 class="info-title">Are you sure you want to delete this Oreder?</h4>
                                </div>
                                <div class="form-group bmd-form-group is-filled" style="display:none">
                                    <label class="label-control bmd-label-static">RecId</label>
                                    <input type="text" class="form-control" id="recIdDeleteEdit">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" onclick="onDeleteLine()">Delete</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Booking -->
    <div class="modal fade" id="DemoModal" tabindex="-1" role="dialog" aria-labelledby="DemoModal" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="DemoModalLabel">Order</h5>
                    <button type="button" id="btnGetNewLine" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <font size="2" face="Anantason-Regular">
                        <table id="tbBooking" class="table table-hover">
                            <thead>
                                <tr>
                                    <th>วันที่ขาย</th>
                                    <th>Store</th>
                                    <th>Sales order</th>
                                    <th>Purchase order</th>
                                    <th>ชื่อลูกค้า</th>
                                    <th>Pool</th>
                                    <th>Qty</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </font>
                </div>
            </div>
        </div>
    </div>

    <!-- Previw Image -->
    <div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">Image preview</h4>
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                </div>
                <div class="modal-body">
                    <img id="myImage" class="img-responsive" src="https://images.unsplash.com/photo-1517303650219-83c8b1788c4c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=bd4c162d27ea317ff8c67255e955e3c8&auto=format&fit=crop&w=2691&q=80" alt="" width="100%" height="100%">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Remove Image -->
    <div class="modal fade" id="imageRemoveModal" tabindex="-1" role="dialog" aria-labelledby="imageRemoveModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <!--<h5 class="modal-title" id="msgModalLabel">Message</h5>-->
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 ml-auto">
                            <div class="col-md-12">
                                <div class="icon icon-danger" style="padding-left:100px">
                                    <i class="material-icons" style="padding-left:100px">clear</i>
                                </div>
                                <div class="description" style="padding-left:0px">
                                    <h4 class="info-title">Are you sure you want to delete this Oreder?</h4>
                                </div>
                                <div class="form-group bmd-form-group is-filled" style="display:none">
                                    <label class="label-control bmd-label-static">RecId</label>
                                    <input type="text" class="form-control" id="recIdDelete">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Branch -->
    <div class="modal fade" id="BranchModal" tabindex="-1" role="dialog" aria-labelledby="BranchModal" aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="BranchModalLabel">Order</h5>
                    <button type="button" id="btnGetNewLine" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <font size="2" face="Anantason-Regular">
                        <div id="txtBranch">
                            55555555
                            <br />
                            666666
                        </div>
                    </font>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer" data-background-color="black">
        <div class="container">
            <nav class="float-left">
            </nav>
            <div class="copyright float-right">
                &copy;
                <script>
                    document.write(new Date().getFullYear())
                </script>, made with <i class="material-icons">favorite</i> by starmark manufacturing co,.ltd

            </div>
        </div>
    </footer>
    <!--   Core JS Files   -->

</body>
</html>